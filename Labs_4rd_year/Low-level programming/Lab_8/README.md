# Программа для вычисления значений функции и её ряда Тейлора

## Задача
1. Построить таблицу значений функции $y = \ln\left(x + \sqrt{1 + x^2}\right)$ для $x \in [-0.2; 0.8]$ с шагом $h = 0.1$
2. Вычислить значение функции $\ln(1 + x) = x - \frac{x^2}{2} + \frac{x^3}{3} - \frac{x^4}{4} + \dots$ в точке $x = x_0$. Сравнить полученное значение со значением стандартной математической функции

## Описание
Программа выполняет следующие действия:
1. Выводит таблицу значений функции $y = \ln\left(x + \sqrt{1 + x^2}\right)$ для заданного диапазона
2. Запрашивает у пользователя ввод значения $x_0$ с проверкой условия $|x_0| < 1$
3. Вычисляет значение $\ln(1 + x_0)$ двумя способами:
   - С помощью разложения в ряд Тейлора с точностью $\varepsilon = 0.0001$
   - С использованием стандартной математической функции
4. Выводит оба значения для сравнения
5. Обеспечивает цикличный ввод до получения корректных данных

## Параметры запуска программы:
Для запуска программы необходимо наличие требуемого ПО для запуска, написанного в пункте "Требования".

```bash
nasm -f elf32 program.asm -o program.o
ld -m elf_i386 program.o -o program -lc -lm
./program
```

## Пример работы

**Вывод таблицы значений функции:**
```
x       f(x)
-0.20000        -0.19869
-0.10000        -0.09983
0.00000         0.00000
0.10000         0.09983
0.20000         0.19869
0.30000         0.29552
0.40000         0.39003
0.50000         0.48121
0.60000         0.56861
0.70000         0.65165
0.80000         0.72989
```

**Корректный ввод x0:**
```
Enter x0 (|x0| < 1): 0.5
Series: 0.40547
Standard: 0.40547
Enter x0 (|x0| < 1): -0.3
Series: -0.35667
Standard: -0.35667
```

**Обработка ошибок:**
```
Enter x0 (|x0| < 1): 1.2
Invalid input or |x0| >= 1 — try again
Enter x0 (|x0| < 1): abc
Invalid input or |x0| >= 1 — try again
```

## Особенности реализации

- **Язык программирования**: NASM (Netwide Assembler) для x86 архитектуры
- **Математические вычисления**: Используется FPU (Floating Point Unit) для арифметики с плавающей точкой
- **Точность вычислений**: 
  - Таблица выводится с точностью 5 знаков после запятой
  - Ряд Тейлора вычисляется до достижения точности $\varepsilon = 0.0001$
- **Проверка корректности ввода**: 
  - Проверка успешности сканирования
  - Проверка условия $|x_0| < 1$
- **Форматированный вывод**: Используются системные функции printf и scanf
- **Обработка ошибок**: При обнаружении недопустимых данных выводится информативное сообщение об ошибке
- **Коды возврата**: 
  - 0 - успешное выполнение
  - 1 - ошибка выполнения

## Требования
- NASM (Netwide Assembler) версии 2.10 или выше
- Операционная система Linux с поддержкой 32-битных приложений
- Процессор с архитектурой i386 или совместимой
- Библиотека libc для доступа к функциям printf, scanf, fflush
- Библиотека libm для математических функций

## Математическая справка

**Функция 1:** $y = \ln\left(x + \sqrt{1 + x^2}\right)$
- Эта функция известна как обратный гиперболический синус: $\operatorname{arsinh}(x) = \ln\left(x + \sqrt{1 + x^2}\right)$
- Область определения: все действительные числа
- Функция нечётная: $f(-x) = -f(x)$
- При малых $|x|$: $f(x) \approx x - \frac{x^3}{6} + \frac{3x^5}{40} - \dots$

**Ряд Тейлора для $\ln(1 + x)$:**
$$
\ln(1 + x) = \sum_{n=1}^{\infty} (-1)^{n+1} \frac{x^n}{n} = x - \frac{x^2}{2} + \frac{x^3}{3} - \frac{x^4}{4} + \dots
$$
- Область сходимости: $-1 < x \leq 1$
- При $|x| < 1$ ряд сходится абсолютно
- При $x = 1$ ряд сходится условно (гармонический ряд со знакочередованием)
- Использованная точность: $\varepsilon = 0.0001$

**Алгоритм вычисления ряда:**
1. Инициализация: $\text{sum} = x$, $\text{term} = x$, $n = 1$
2. Цикл пока $|\text{term}| \geq \varepsilon$:
   - $n = n + 1$
   - $\text{term} = -\text{term} \cdot x \cdot (n-1) / n$
   - $\text{sum} = \text{sum} + \text{term}$
3. Результат: $\text{sum} \approx \ln(1 + x)$

**Связь между функциями:**
Для малых значений $x$ справедливо приближение:
$$
\ln\left(x + \sqrt{1 + x^2}\right) \approx x - \frac{x^3}{6} + \frac{3x^5}{40} - \dots
$$
что соответствует разложению в ряд Тейлора функции $\operatorname{arsinh}(x)$.

## Структура программы

### Секция данных (section .data)
- `start_x`, `end_x`, `step` - параметры таблицы
- `epsilon` - точность вычисления ряда
- `one` - константа 1.0 для проверки условия
- Форматные строки для ввода/вывода

### Секция неинициализированных данных (section .bss)
- `current_x` - текущее значение x при построении таблицы
- `x0` - вводимое пользователем значение
- `n` - счётчик членов ряда

### Основные этапы работы:
1. **Инициализация FPU** (`finit`)
2. **Построение таблицы**:
   - Цикл от `start_x` до `end_x` с шагом `step`
   - Вычисление $f(x) = \ln\left(x + \sqrt{1 + x^2}\right)$
   - Форматированный вывод результатов
3. **Цикл ввода-вычисления**:
   - Запрос ввода $x_0$
   - Проверка корректности: $|x_0| < 1$
   - Вычисление $\ln(1 + x_0)$ через ряд Тейлора
   - Вычисление $\ln(1 + x_0)$ через стандартную функцию
   - Вывод обоих результатов
   - Возврат к запросу нового ввода

## Обработка ошибок
1. **Некорректный ввод** (не число): проверка возвращаемого значения `scanf`
2. **Недопустимый диапазон** ($|x_0| \geq 1$): сравнение через FPU инструкции
3. **В обоих случаях**: вывод сообщения об ошибке и повторный запрос ввода

## Примечания по реализации

### Использование FPU стека:
Программа активно использует 8-уровневый стек FPU:
- `fld` - загрузка значения на стек
- `fstp` - сохранение значения и извлечение из стека
- `faddp`, `fmulp`, `fdivp` - арифметические операции с извлечением
- `fcomip` - сравнение с извлечением

### Вычисление натурального логарифма:
Используется формула:
$$
\ln(a) = \log_2(a) \cdot \ln(2)
$$
что реализуется комбинацией инструкций:
- `fldln2` - загрузка $\ln(2)$
- `fyl2x` - вычисление $y \cdot \log_2(x)$

### Оптимизация вычислений:
- Минимальное использование памяти
- Эффективное использование FPU стека
- Прямое вычисление без промежуточных сохранений

## Тестовые данные

### Ожидаемые результаты для таблицы:
| $x$ | $f(x)$ | Приближение |
|-----|--------|-------------|
| $-0.2$ | $-0.19869$ | $-0.2$ |
| $0.0$ | $0.00000$ | $0.0$ |
| $0.5$ | $0.48121$ | $0.47917$ (3 члена ряда) |
| $0.8$ | $0.72989$ | $0.72533$ (3 члена ряда) |

### Проверка ряда Тейлора:
| $x_0$ | Ряд | Стандарт | Погрешность |
|-------|-----|----------|-------------|
| $0.1$ | $0.09531$ | $0.09531$ | $<10^{-5}$ |
| $0.5$ | $0.40547$ | $0.40547$ | $<10^{-5}$ |
| $-0.5$ | $-0.69315$ | $-0.69315$ | $<10^{-5}$ |
| $0.9$ | $0.64185$ | $0.64185$ | $<10^{-5}$ (после ~100 итераций) |

## Возможные улучшения
1. Добавление вывода количества итераций для ряда Тейлора
2. Реализация вычисления относительной погрешности
3. Поддержка ввода параметров через аргументы командной строки
4. Расширение диапазона таблицы и изменение шага
5. Добавление графического представления результатов

## Заключение
Программа демонстрирует:
1. Работу с FPU в ассемблере
2. Вычисление сложных математических функций
3. Реализацию численных методов (ряды Тейлора)
4. Обработку пользовательского ввода
5. Форматированный вывод результатов

Код является учебным примером использования ассемблера для математических вычислений.
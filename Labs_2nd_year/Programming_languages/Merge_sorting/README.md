# Лабораторная работа: Сортировка естественным слиянием

## Цель работы
1. Реализовать алгоритм внешней сортировки методом естественного слияния
2. Изучить работу с файлами в C#
3. Освоить принципы сортировки больших объемов данных
4. Разработать эффективный алгоритм для обработки данных, не помещающихся в память

## Описание программы

### Основные функции

#### `NaturalMergeSortFiles`
- Организует основной цикл сортировки
- Чередует разделение и слияние файлов
- Завершает работу, когда файл полностью отсортирован

#### `SplitFile`
- Разделяет входной файл на два временных файла
- Сохраняет естественные серии (уже упорядоченные последовательности)
- Возвращает false, если второй файл остался пустым (признак завершения сортировки)

#### `MergeFiles`
- Сливает два временных файла в один выходной
- Выбирает минимальные элементы из текущих позиций файлов
- Сохраняет порядок элементов в результирующем файле

#### `GenerateTestData`
- Генерирует тестовые данные (случайные числа)
- Сохраняет их в указанный файл

### Особенности реализации

1. **Работа с файлами**:
   - Использование StreamReader/StreamWriter для эффективного чтения/записи
   - Корректное освобождение ресурсов (using statements)
   - Проверка размера файлов для определения завершения сортировки

2. **Алгоритм сортировки**:
   - Сохранение естественных серий при разделении
   - Эффективное слияние с выбором минимального элемента
   - Оптимизированная работа с большими объемами данных

3. **Тестирование**:
   - Генерация случайных данных для проверки
   - Поддержка различных размеров входных данных

## Пример использования

1. Программа генерирует тестовый файл со 100 случайными числами
2. Запускает процесс сортировки:
   - Разделяет файл на два временных
   - Сливает их в отсортированном порядке
   - Повторяет процесс, пока файл не будет полностью отсортирован
3. Выводит сообщение о завершении сортировки

## Возможные улучшения

1. Добавить обработку ошибок при работе с файлами
2. Реализовать поддержку других типов данных (не только целых чисел)
3. Добавить прогресс-бар для визуализации процесса сортировки
4. Оптимизировать работу с памятью (буферизация чтения/записи)
5. Реализовать многопоточное слияние для больших файлов

## Инструкция по использованию

1. Запустите программу (автоматически создастся тестовый файл)
2. Для сортировки своего файла:
   - Подготовьте файл input.txt с числами (по одному на строку)
   - Разместите его в директории с программой
   - Запустите программу
3. Результат будет записан в исходный файл (он будет перезаписан)
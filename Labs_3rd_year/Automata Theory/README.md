# FTP-сервер с конечным автоматом и тестировщиком

## Описание проекта

Этот проект реализует FTP-сервер с расширенной логикой обработки команд на основе конечного автомата и включает автоматизированную систему тестирования. Сервер поддерживает стандартные FTP-команды и добавляет специальные состояния для обработки ошибок.

## Особенности реализации

1. **Кастомный обработчик FTP**:
   - Наследуется от базового FTPHandler
   - Добавлен механизм состояний (state machine)
   - Расширена логика обработки команд USER, PASS, SIZE, REIN, QUIT

2. **Механизм состояний**:
   - Нормальный режим (state = None)
   - Режим ошибки (state = "Error")
   - Специальные обработчики для каждого состояния

3. **Тестировщик**:
   - Автоматическое выполнение тест-кейсов
   - Поддержка чтения тестов из файла
   - Генерация отчетов о тестировании

## Установка и запуск

1. Установите зависимости:
```bash
pip install pyftpdlib
```

2. Запустите сервер и тесты:
```bash
python server.py
```

## Конфигурация

Файл `graph-method.txt` должен содержать тест-кейсы в формате:
```
USER username,PASS password:response1,response2
```

## Логирование

Программа ведет подробное логирование в консоль с уровнями DEBUG и выше. Логи включают:
- Подключения/отключения клиентов
- Выполняемые команды
- Результаты тестирования

## Тестирование

Тестировщик поддерживает следующие команды:
- USER - аутентификация пользователя
- PASS - ввод пароля
- SIZE - запрос размера файла
- REIN - сброс соединения
- RETR - загрузка файла

Результаты тестирования сохраняются в файлы:
- `results.txt` - детальные результаты по каждой команде
- `test_results.txt` - общие результаты тест-кейсов

## Пример работы

```
2023-05-15 12:00:00 - INFO - FTP-сервер запущен на порту 2121...
2023-05-15 12:00:05 - DEBUG - Client connected
2023-05-15 12:00:05 - DEBUG - User correct_user logged in
2023-05-15 12:00:05 - DEBUG - Password entered: correct_pass
2023-05-15 12:00:10 - DEBUG - Client disconnected
```

## Требования

- Python 3.6+
- Библиотека pyftpdlib

## Дальнейшее развитие

1. Добавление поддержки TLS/SSL
2. Реализация дополнительных FTP-команд
3. Улучшение системы тестирования
4. Добавление большего количества состояний конечного автомата